@using FitnessPT.Dtos

<div class="routine-card">
    <div class="card-actions">
        <button class="btn-edit" @onclick="HandleEdit" @onclick:stopPropagation>
            âœï¸ ìˆ˜ì •
        </button>
        <button class="btn-delete" @onclick="HandleDelete" @onclick:stopPropagation>
            ğŸ—‘ï¸
        </button>
    </div>

    <div class="card-clickable" @onclick="HandleView">
        <div class="card-image-wrapper">
            <div class="card-image" style="background-image: url('@(string.IsNullOrEmpty(Routine.ThumbnailUrl) ? "./img/gym_girl.png" : Routine.ThumbnailUrl)')"></div>
        </div>
        <div class="card-body">
            <div class="routine-title">@Routine.Name</div>
            <div class="routine-duration">ì†Œìš”ì‹œê°„: @Routine.EstimatedDuration H</div>
            <div class="badge-category-container">
                <span class="badge-level">@GetLevelText()</span>
                <span class="badge-category">@GetCategoryText()</span>
            </div>
        </div>
    </div>
</div>

@code {
    [Parameter, EditorRequired] public RoutineDto Routine { get; set; } = null;
    [Parameter] public EventCallback<RoutineDto> OnView { get; set; }
    [Parameter] public EventCallback<RoutineDto> OnEdit { get; set; }
    [Parameter] public EventCallback<int> OnDelete { get; set; }

    private void HandleView()
    {
        OnView.InvokeAsync(Routine);
    }

    private void HandleEdit()
    {
        OnEdit.InvokeAsync(Routine);
    }

    private void HandleDelete()
    {
        OnDelete.InvokeAsync(Routine.Id);
    }

    private string GetLevelText()
    {
        return Routine.Level switch
        {
            "beginner" => "ì´ˆê¸‰",
            "intermediate" => "ì¤‘ê¸‰",
            "advanced" => "ê³ ê¸‰",
            _ => Routine.Level ?? ""
        };
    }

    private string GetCategoryText()
    {
        return Routine.Category?.ToLower() switch
        {
            "upper_body" => "ìƒì²´",
            "lower_body" => "í•˜ì²´",
            "core" => "ì½”ì–´",
            "cardio" => "ìœ ì‚°ì†Œ",
            "full_body" => "ì „ì‹ ",
            _ => Routine.Category ?? ""
        };
    }

}